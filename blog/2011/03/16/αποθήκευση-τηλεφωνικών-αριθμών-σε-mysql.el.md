<!-- -
Title: Αποθήκευση τηλεφωνικών αριθμών σε MySQL
Author: Marios Zindilis
First Published: 2011-03-16
- -->

<ol class="breadcrumb" itemprop="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/blog/">Blog</a></li>
    <li><a href="/blog/2011/">2011</a></li>
    <li><a href="/blog/2011/03/">03</a></li>
    <li><a href="/blog/2011/03/16/">16</a></li>
    <li><a href="/blog/2011/03/16/αποθήκευση-τηλεφωνικών-αριθμών-σε-mysql.el.html">Αποθήκευση τηλεφωνικών αριθμών σε MySQL </a></li>
</ol>


Αποθήκευση τηλεφωνικών αριθμών σε MySQL 
=======================================

Γράφω πρώτα το συμπέρασμα, για όποιον βαριέται να διαβάσει το υπόλοιπο κείμενο:

<blockquote>Αποθηκεύστε τους τηλεφωνικούς αριθμούς ως <code>VARCHAR(20)</code>, εκτός και αν υπάρχει σημαντικός λόγος γιατί να κάνετε κάτι διαφορετικό. Επιπλέον, χρησιμοποιήστε κώδικα σε επίπεδο εφαρμογής για 2 ενέργειες: Α. για να αφαιρέσετε από την είσοδο του χρήστη οποιουσδήποτε μη αριθμητικούς χαρακτήρες, πριν από την εισαγωγή στη βάση (π.χ. παύλες, κενά, παρενθέσεις), και Β. για να μορφοποιήσετε τον αριθμό με μη αριθμητικούς χαρακτήρες, πριν από την έξοδο στο χρήστη, ώστε να βελτιώσετε την αναγνωσιμότητα (π.χ. με παύλες, κενά, παρενθέσεις).</blockquote>

Κατ' αρχήν, το <strong>μήκος=20</strong> προέρχεται από τη <a href="http://en.wikipedia.org/wiki/E.164" title="E.164 Recommendation"> σύσταση Ε.164 του ITU-T</a>, η οποία καθορίζει το μέγιστο μήκος των τηλεφωνικών αριθμών σε 15 αριθμητικούς χαρακτήρες, μη συμπεριλαμβανομένου του <a href="http://en.wikipedia.org/wiki/International_call_prefix" title="Λίστα με τα προθέματα διεθνών κλήσεων">προθέματος διεθνούς κλήσης</a>, το μέγιστο από τα οποία είναι 5 χαρακτήρες.

Ο λόγος που προτείνω το <strong>VARCHAR</strong> αντί κάποιου αριθμητικού τύπου της MySQL είναι γιατί:
<ol><li>Οι τηλεφωνικοί αριθμοί, δεν λογίζονται ως ακέραιοι, με την έννοια ότι:<ul><li>δεν πρόκειται ποτέ να εκτελέσετε πάνω τους αριθμητικές πράξεις, και</li><li>δεν έχει νόημα η ταξινόμησή τους κατά μέγεθος, δηλαδή δεν νοείται «μεγαλύτερος» και «μικρότερος» αριθμός τηλεφώνου.</li></ul><li>Σε μερικές χώρες, ένας τοπικός αριθμός τηλεφώνου μπορεί να ξεκινάει από μηδέν. Μερικές (ή όλες;) μηχανές αποθήκευσης στη MySQL θα αποκόψουν τα μηδενικά που προηγούνται ενός αριθμού, όταν αυτός αποθηκεύεται ως ακέραιος.</li><li>Τέλος, η διαφορά στο μέγεθος της τελικής αποθηκευμένης πληροφορίας, είναι ασήμαντη, για τόσο μικρά κομμάτια πληροφορίας.</li></ol>

Χρησιμοποιώντας VARCHAR(20) για αποθήκευση τηλεφωνικών αριθμών, <strong>υποχρεωτικά</strong> θα χρησιμοποιήσετε επιπλεόν κώδικα σε επίπεδο εφαρμογής για να καθαρίσετε την είσοδο του χρήστη από μη αριθμητικούς χαρακτήρες (αλλιώς μπορεί να ξεφύγει στο μήκος), και <strong>προεραιτικά</strong> για να ομορφύνετε τον τηλεφωνικό αριθμό στην έξοδο.

Σημειώστε ότι, παρόμοιο σκεπτικό ισχύει και την αποθήκευση Ταχυδρομικού Κώδικα, πόσω μάλλον που μερικές χώρες (π.χ. Ηνωμένο Βασίλειο, Καναδάς) χρησιμοποιούν και γράμματα του αλφαβήτου στους Τ.Κ.
